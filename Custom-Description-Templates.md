## Custom Description Template Feature

### Overview

The uploader supports custom description templates using `Jinja2` format. Users can place their own templates inside
the `description_templates/custom` folder to override the built-in templates.

### How to Use Custom Templates

- Navigate to the `description_templates/custom` folder.
- Create a new template file named `<TRACKER_NAME>.jinja2`.
- Optionally, create source-type-specific templates using the format `<TRACKER_NAME>-<SOURCE_TYPE>.jinja2`.

The uploader will automatically detect and apply the appropriate template when processing uploads.

If you are using Docker to run, then update your run command to mount a custom folder. After which you can place your
custom templates in this custom folder and uploader will be able to make use of it.

```shell
docker run --rm -it \
    -v <PATH_TO_YOUR_MEDIA>:/data \
    -v ./temp_upload:/app/temp_upload \
    -v ./custom_description_templates:/app/description_templates/custom \
    --env-file config.env \
    noobmaster669/gg-bot-uploader -t ATH TSP -p "/data/<YOUR_FILE_FOLDER>"
```

Here you can place your custom templates inside the `custom_description_templates` folder.

### Template Selection Priority

The uploader searches for templates in the following order:

- Source-Type-Specific Custom Template (e.g., `<TRACKER_NAME>-<SOURCE_TYPE>.jinja2` in `description_templates/custom/`)
- Source-Type-Specific Built-in Template (e.g., `<TRACKER_NAME>-<SOURCE_TYPE>.jinja2` in default templates folder)
- General Tracker Custom Template (e.g., `<TRACKER_NAME>.jinja2` in `description_templates/custom/`)
- General Tracker Built-in Template (e.g., `<TRACKER_NAME>.jinja2` in default templates folder)

If no matching template is found, the uploader will fall back to the built-in general template for the tracker.

### Supported source types

Uploader currently supports the following source types.

- webdl => `<TRACKER_NAME>-webdl.jinja2`
- bluray_encode => `<TRACKER_NAME>-bluray_encode.jinja2`
- bluray_remux =>  `<TRACKER_NAME>-bluray_remux.jinja2`

### Example

For a `webdl` upload on tracker passtheholder, the uploader will search for:

- description_templates/custom/ **passtheholder-webdl.jinja2**
- description_templates/ **passtheholder-webdl.jinja2**
- description_templates/custom/ **passtheholder.jinja2**
- description_templates/ **passtheholder.jinja2**

If none of these exist, the uploader will fail to find a matching template.

## Components available in custom templates

- __{{ data.custom_description_components }}__ => This will write all the custom description components provided by the
  user.
- __{{ data.mediainfo }}__ => This will output the generated mediainfo contents
- __{{ data.screenshots }}__ => This will put the screenshots according to the `screenshot_type` supported by the
  tracker.
- __{{ data.internal.*** }}__
    - __{{ data.internal.uploader_signature }}__ => write the uploader signature to description file.
    - __{{ data.internal.uploader_signature_hex }}__ => write the uploader signature using hex colors to description
      file.
    - __{{ data.internal.screenshot_header }}__ => This will write the default screenshot header to the description
      file.
    - __{{ data.internal.bbcode_line_break }}__ => write the line break supported by the bbcode engine of the tracker. (
      This is configured in the tracker templates.)
- __{{ data.bbcode.***}}__
    - __{{ data.bbcode.center_start }}__ => Writes `[center]`
    - __{{ data.bbcode.center_end }}__ => Writes `[/center]`
    - __{{ data.bbcode.code_start }}__ => Writes `[code]`
    - __{{ data.bbcode.code_end }}__ => Writes `[/code]`
- __{{ data.torrent_info.** }}__
    - The entire torrent info content generated by the uploader is available for use. To see the keys available you can
      refer to the logs generated in debug mode.

### Examples
Default template
```jinja2
{{ data.custom_description_components }}

{{ data.bbcode.center_start }} {{ data.internal.screenshot_header }}

{{ data.screenshots }} {{ data.bbcode.center_end }}

{{ data.bbcode.center_start }} {{ data.internal.uploader_signature }} {{ data.bbcode.center_end }}

```

Creating a release notes section
```jinja2
{{ data.bbcode.code_start }}
Release Name....: {{ data.torrent_info.torrent_title }}
Video...........: {{ data.torrent_info.screen_size }} {{ data.torrent_info.mediainfo_summary_data.Video[0].Codec }} {{ data.torrent_info.mediainfo_summary_data.Video[0]['Bit Depth'] }} @ {{ data.torrent_info.mediainfo_summary_data.Video[0]['Bit Rate'] }}
Audio...........: {{ data.torrent_info.mediainfo_summary_data.Audio[0].Format }} {{ data.torrent_info.audio_channels }} @ {{ data.torrent_info.mediainfo_summary_data.Audio[0]['Bit Rate'] }}
Notes...........: Enjoy!
{{ data.bbcode.code_end }}
```


### Notes

> Templates must follow Jinja2 syntax.
>
> The custom folder takes precedence over default templates.
>
> Different upload types can have different templates for the same tracker.
>
> Ensure proper file naming for templates to be recognized.
