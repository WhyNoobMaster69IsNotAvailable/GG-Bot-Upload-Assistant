## API Keys and URLs:
Tracker API keys and announce urls are optional unless you plan on uploading torrents to them. For example if you don't intent to upload torrents to Asiancinema, then there is no need to provide its api key and announce url.

<details><summary>Tracker API and Announce Url Properties</summary>
<table>
    <tbody>
         <tr style="text-align: center; font-size:20px">
            <th><strong>Property</strong></th>
            <th><strong>Required/Optional</strong></th>
            <th><strong>Description</strong></th>
        </tr>
        <tr style="text-align: center">
            <td><strong>ACM_API_KEY</strong></td>
            <td>Optional</td>
            <td>Asiancinema API Key</td>
        </tr>
        <tr style="text-align: center">
            <td><strong>ACM_ANNOUNCE_URL</strong></td>
            <td>Optional</td>
            <td>Asiancinema private announce url</td>
        </tr>
<tr style="text-align: center"><td></td><td></td><td></td></tr>
<tr style="text-align: center">
            <td><strong>BHD_API_KEY</strong></td>
            <td>Optional</td>
            <td>Beyond-HD API Key</td>
        </tr>
        <tr style="text-align: center">
            <td><strong>BHD_ANNOUNCE_URL</strong></td>
            <td>Optional</td>
            <td>Beyond-HD private announce url</td>
        </tr>
<tr style="text-align: center"><td></td><td></td><td></td></tr>
<tr style="text-align: center">
            <td><strong>BLU_API_KEY</strong></td>
            <td>Optional</td>
            <td>Blutopia API Key</td>
        </tr>
        <tr style="text-align: center">
            <td><strong>BLU_ANNOUNCE_URL</strong></td>
            <td>Optional</td>
            <td>Blutopia private announce url</td>
        </tr>
<tr style="text-align: center"><td></td><td></td><td></td></tr>
<tr style="text-align: center">
            <td><strong>R4E_API_KEY</strong></td>
            <td>Optional</td>
            <td>Racing4Everyone API Key</td>
        </tr>
        <tr style="text-align: center">
            <td><strong>R4E_ANNOUNCE_URL</strong></td>
            <td>Optional</td>
            <td>Racing4Everyone private announce url</td>
        </tr>
<tr style="text-align: center"><td></td><td></td><td></td></tr>
<tr style="text-align: center">
            <td><strong>ATH_API_KEY</strong></td>
            <td>Optional</td>
            <td>Aither API Key</td>
        </tr>
        <tr style="text-align: center">
            <td><strong>ATH_ANNOUNCE_URL</strong></td>
            <td>Optional</td>
            <td>Aither private announce url</td>
        </tr>
<tr style="text-align: center"><td></td><td></td><td></td></tr>
<tr style="text-align: center">
            <td><strong>TELLY_API_KEY</strong></td>
            <td>Optional</td>
            <td>Telly API Key</td>
        </tr>
        <tr style="text-align: center">
            <td><strong>TELLY_ANNOUNCE_URL</strong></td>
            <td>Optional</td>
            <td>Telly private announce url</td>
        </tr>
<tr style="text-align: center"><td></td><td></td><td></td></tr>
<tr style="text-align: center">
            <td><strong>NTELOGO_API_KEY</strong></td>
            <td>Optional</td>
            <td>Ntelogo API Key</td>
        </tr>
        <tr style="text-align: center">
            <td><strong>NTELOGO_ANNOUNCE_URL</strong></td>
            <td>Optional</td>
            <td>Ntelogo private announce url</td>
        </tr>
<tr style="text-align: center"><td></td><td></td><td></td></tr>
<tr style="text-align: center">
            <td><strong>TSP_API_KEY</strong></td>
            <td>Optional</td>
            <td>TheScenePlace API Key</td>
        </tr>
        <tr style="text-align: center">
            <td><strong>TSP_ANNOUNCE_URL</strong></td>
            <td>Optional</td>
            <td>TheScenePlace private announce url</td>
        </tr>
<tr style="text-align: center"><td></td><td></td><td></td></tr>
<tr style="text-align: center">
            <td><strong>DT_API_KEY</strong></td>
            <td>Optional</td>
            <td>Desitorrents API Key</td>
        </tr>
        <tr style="text-align: center">
            <td><strong>DT_ANNOUNCE_URL</strong></td>
            <td>Optional</td>
            <td>Desitorrents private announce url</td>
        </tr>
<tr style="text-align: center"><td></td><td></td><td></td></tr>
<tr style="text-align: center">
            <td><strong>UHDHVN_API_KEY</strong></td>
            <td>Optional</td>
            <td>UHD-Heaven API Key</td>
        </tr>
        <tr style="text-align: center">
            <td><strong>UHDHVN_ANNOUNCE_URL</strong></td>
            <td>Optional</td>
            <td>UHD-Heaven private announce url</td>
        </tr>
<tr style="text-align: center"><td></td><td></td><td></td></tr>
<tr style="text-align: center">
            <td><strong>STC_API_KEY</strong></td>
            <td>Optional</td>
            <td>SkipTheCommericals API Key</td>
        </tr>
        <tr style="text-align: center">
            <td><strong>STC_ANNOUNCE_URL</strong></td>
            <td>Optional</td>
            <td>SkipTheCommericals private announce url</td>
        </tr>
<tr style="text-align: center"><td></td><td></td><td></td></tr>
<tr style="text-align: center">
            <td><strong>SPD_API_KEY</strong></td>
            <td>Optional</td>
            <td>SpeedApp API Key</td>
        </tr>
        <tr style="text-align: center">
            <td><strong>SPD_ANNOUNCE_URL</strong></td>
            <td>Optional</td>
            <td>SpeedApp private announce url</td>
        </tr>
<tr style="text-align: center"><td></td><td></td><td></td></tr>
<tr style="text-align: center">
            <td><strong>TDB_API_KEY</strong></td>
            <td>Optional</td>
            <td>TorrentDB API Key</td>
        </tr>
        <tr style="text-align: center">
            <td><strong>TDB_ANNOUNCE_URL</strong></td>
            <td>Optional</td>
            <td>TorrentDB private announce url</td>
        </tr>
<tr style="text-align: center"><td></td><td></td><td></td></tr>
<tr style="text-align: center">
            <td><strong>ACM_API_KEY</strong></td>
            <td>Optional</td>
            <td>Asiancinema API Key</td>
        </tr>
        <tr style="text-align: center">
            <td><strong>ACM_ANNOUNCE_URL</strong></td>
            <td>Optional</td>
            <td>Asiancinema private announce url</td>
        </tr>
    </tbody>
</table>
</details>

The metadata fetching is performed by the upload assistant with the help of [TheMovieDB](https://www.themoviedb.org/). The API Key to interact with TMDB needs to be provided and the operations done by the upload assistant can be notified to a text channel in a discord service with the help of discord webhook.

<table>
    <tbody>
         <tr style="text-align: center; font-size:20px">
            <th><strong>Property</strong></th>
            <th><strong>Required/Optional</strong></th>
            <th><strong>Description</strong></th>
        </tr>
        <tr style="text-align: center">
            <td><strong>TMDB_API_KEY</strong></td>
            <td>Required</td>
            <td>The API key to communicate with TMDB ([TheMovieDB](https://www.themoviedb.org/))<br><br>
                To get an API Key:<br>
                <ul>
                    <li>Create an account at [TheMovieDB](https://www.themoviedb.org/)</li>
                    <li>Navigate to settings</li>
                    <li>Choose the API section and copy the API Key (v3 auth)</li>
                </ul>
                Refer to [API Documentation](https://www.themoviedb.org/documentation/api) for more details
            </td>
        </tr>
        <tr style="text-align: center">
            <td><strong>DISCORD_WEBHOOK</strong></td>
            <td>Optional</td>
            <td>Discord webhook where torrent upload messages and status are to be sent to. <br><br>
                To create a Webhook:<br>
                <ul>
                    <li>Open your Server Settings and head into the Integrations tab</li>
                    <li>Click the "Create Webhook" button to create a new webhook!</li>
                </ul>
                Refer to [Intro To Webhooks](https://support.discord.com/hc/en-us/articles/228383668-Intro-to-Webhooks) for more details
                See the image below for an example of the notifications you would receive
                ![discord_notification](https://user-images.githubusercontent.com/80369373/111088206-68cfb580-84fc-11eb-853a-66b968f90a75.png)
            </td>
        </tr>
    </tbody>
</table>

2. **Image Hosts**
    * These are used for screenshots, currently 4 are supported

      | Image Host    |    API Info   |
      | ------------- | ------------- |
      | [imgbb](https://api.imgbb.com/)  | API Key required  |
      | [ptpimg](https://ptpimg.me/) | Required (see [ptpimg_uploader](https://github.com/theirix/ptpimg-uploader))  |
      | [freeimage](https://freeimage.host/page/api)  | API Key required  |
      | [imgbox](https://imgbox.com/)  | [No API Key needed](https://github.com/plotski/pyimgbox)  |
    * If you intend to use **ptpimg** you must install the package [ptpimg-uploader](https://pypi.org/project/ptpimg-uploader/) using `pip install ptpimg_uploader`
      * **ptpimg_uploader** isn't included in `requirements.txt` by default. You'll need to manually **pip install** it if you want to use it.    
    * Set the order that we follow for image uploads (if a host fails or is unreachable we can fallback to the next host specified)
    * For example your order might look something like this (imgbox disabled in this example)
      ```
      img_host_1=freeimage
      img_host_2=imgbb
      img_host_3=ptpimg
      img_host_4=
      ```
<br />
<br />

3. **Number of screenshots**
    * Pretty self explanatory, set this to however many screenshots you want taken & uploaded
    * This will split the duration of the video into this many chunks and take a screenshot at each chunks timestamp
      * ```num_of_screenshots=6```  
    * Along with the number of screenshots the thumbnail size to be used can also be configured. Default value is 350.
      * ```thumb_size=350```  
    * No Spoiler Screenshots. When this property is enabled, screenshots will be taken from the first half of the movie or show. If disabled, screenshots will be taken from the full duration of the movie or show (chances of spoilers in screenshots.)
      * ```no_spoilers=true```  
   <br /> 
   <br />     
          
4. **Selecting media for uploading**
    * You can either set a **upload_dir_path** or use the **-path** argument
    1. **upload_dir_path:** set the full path to a folder which contains a single file or folder (e.g. season pack), and it will be uploaded automatically upon script execution
        * ```upload_dir_path=/home/user/videos/upload_me/```
    2. **-path argument:** If you leave **upload_dir_path** blank then you have to supply the **-path** argument followed by the path to the media you want to upload (video file or folder)
        * ```python3 auto_upload.py -t ABC -path /home/user/videos/upload_me/test.mkv```
<br />
<br />

5. **Post Processing**
    * After a successful upload we can move the .torrent file & actual media file/folder to a location you specify
    * **Leave blank to disable any movement**
    
    1\. **dot_torrent_move_location:** specify the full path to where you want the .torrent file moved after uploading
        * this could be used with an AutoWatch directory to automatically start seeding

    2\. **media_move_location:** path to location where you want media file/folder moved to after uploading
        * again this could be used with AutoTools to automatically start seeding after uploading
     
    **Torrent client & watch directories:**
    1. **Transmission**: open **settings.json** & append the following lines 
       ```
       "watch-dir": "/path/to/folder/to/watch/",
       "watch-dir-enabled": true
       ```
    2. **rtorrent/ruTorrent**: open **rtorrent.rc** and add the following line (might already exist)
       ```
       schedule = watch_directory,5,5,"load.start=/path/to/folder/to/watch/*.torrent,d.delete_tied="
       ```
    3. **Deluge**: TODO
       ```
       fill me out later
       ```
   <br /> 
   <br /> 
6. **Dupe check**
    * *Use at your own risk*
    * Set ```check_dupes=``` to ```true``` if you want to use this   
      *  Using fuzzywuzzy we compare a stripped down version of the title we generate to the results we get from the site search API
      *  We remove the title, year, resolution before comparing similarity (we filter out results that don't match the resolution of the local file)
    * Set a maximum similarity percentage (don't include percentage symbol) at ```acceptable_similarity_percentage=```
      * ```acceptable_similarity_percentage``` only works if ```check_dupes=true```
      * **100% dupe matches** will always cancel the upload no matter what ```acceptable_similarity_percentage``` is set to
      * (Higher = Riskier)
     
    <details>
      <summary>examples of filename & percent differences</summary>
  
        Ex Machina 2015 1080p UHD Bluray DTS 5.1 HDR x265-D-Z0N3
        Ex Machina 2014 1080p UHD BluRay DTS HDR x265 D-Z0N3
        100%
        -----
        Atomic Blonde 2017 1080p UHD Bluray DD+ 7.1 HDR x265-NCmt
        Atomic Blonde 2017 1080p UHD BluRay DD+7.1 HDR x265 - HQMUX
        84%
        -----
        Get Him to the Greek 2010 1080p Bluray DTS-HD MA 5.1 AVC Remux-EPSiLON
        Get Him to the Greek 2010 Unrated BluRay 1080p DTS-HD MA 5.1 AVC REMUX-FraMeSToR
        88%
        -----
        Knives Out 2019 1080p UHD Bluray DD+ 7.1 HDR x265-D-Z0N3
        Knives Out 2019 REPACK 1080p UHD BluRay DDP 7.1 HDR x265-SA89
        89%
    </details>
   <br /> 
   <br /> 
   
7. **Auto Mode (silent mode)**
    * Set this to `true` to run without any human interaction
      * This will parse the filename & auto select the *right* TMDB ID
      * If minor issues are found (e.g. the filename year is off by 1) it will deal with it and upload anyways 
      * Note that you are responsible for following **all** tracker rules and should manually double check all automatic uploads 

    <br /> 

    * Set this to `false` to have a more interactive & hands on experience **(recommended)**
      * If issues are found (e.g. source can't be auto-detected) you'll be prompted for user input that we can use
      * You'll be shown status updates continually & will have a chance to review/approve the final upload data
      * You'll be shown the exact POST data/file payload before its uploaded for your review/approval 
   
   <br />
   <br />

8. **auto_mode_force**
    * This works in tandem with **auto_mode**, if ```auto_mode=false``` then this won't work
    * If your torrent has minor issues like we can't auto-detect the *audio_channels*, this will force the upload without that info
        * e.g. If **pymediainfo** / **ffprobe** / **regex** can not detect the audio_codec this will simply omit the *audio_codec* from the torrent title and finish the upload
    * **If missing, these can be skipped:**
        * `audio_codec` `audio_channels` `video_codec (maybe)`

   <br />
   <br />


9. **Live / Draft**
    * This only applies to **BHD** since they are the only supported site that has a **Drafts** page
    * It's recommended to set this to ```False``` for your first few uploads, so you can verify everything is to your liking
    * Setting this to `True` will result in **BHD** uploads being posted *live* for everyone to see 

   <br />
   <br />

10. **BDInfo script**
    * If you plan on uploading a "Raw Bluray Disc" you need to fill out this option
    * You need to supply it with the path of the **BDInfoCLI-ng** docker wrapper script
    * Process:
      * Download & install Docker
      * Clone this project [BDInfoCLI-ng](https://github.com/zoffline/BDInfoCLI-ng) & `cd` into it
      * In the folder `/BDInfoCLI-ng-UHD_Support_CLI/scripts/` you'll find a file called `bdinfo`
      * Copy the entire path to that `bdinfo` file into `config.env`

   <br />
   <br />

11. **Auto re-upload**
    * these keys are not required & are used if you are auto re-uploading torrents & are using docker containers
      ```
      translation_needed=
      host_path=
      remote_path=
      ```
    * See this page for more info [xpbot/wiki/autodl-irssi-automatic-re-uploading](https://github.com/ryelogheat/xpbot/wiki/autodl-irssi-automatic-re-uploading)